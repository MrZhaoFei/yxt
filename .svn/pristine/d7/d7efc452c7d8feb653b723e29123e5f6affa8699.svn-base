<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.service.visits.GxyFollowupFzcheckRecordsMapper" >
  
  <delete id="delete" parameterType="map" >
    delete from gxy_followup_fzcheck_records
    where id = #{id}
     
  </delete>
  <insert id="insert" parameterType="org.system.entity.service.visits.GxyFollowupFzcheckRecords" >
    insert into gxy_followup_fzcheck_records (id, gxy_followup_records_id, yljgbm, 
      sfjlbh, jkdabh, jcbh, 
      fzjcxm, fzjcjg, jcrybh, 
      jcryxm, jcrq, jcjgdm, 
      jcjgmc, zfbz, update_time
      )
    values (#{id}, #{gxyFollowupRecordsId}, #{yljgbm}, 
      #{sfjlbh}, #{jkdabh}, #{jcbh}, 
      #{fzjcxm}, #{fzjcjg}, #{jcrybh}, 
      #{jcryxm}, #{jcrq,jdbcType=DATE}, #{jcjgdm}, 
      #{jcjgmc}, #{zfbz}, #{updateTime}
      )
  </insert>
  <update id="update" parameterType="org.system.entity.service.visits.GxyFollowupFzcheckRecords" >
    update gxy_followup_fzcheck_records set id=#{id}
    <if test="yljgbm !=null and yljgbm !=''">
      	,yljgbm = #{yljgbm}
    </if>
    <if test="sfjlbh !=null and sfjlbh !=''">
      	,sfjlbh = #{sfjlbh}
    </if>
    <if test="jkdabh !=null and jkdabh !=''">
      	,jkdabh = #{jkdabh}
    </if>
    <if test="jcbh !=null and jcbh !=''">
      	,jcbh = #{jcbh}
    </if>
    <if test="fzjcxm !=null and fzjcxm !=''">
      	,fzjcxm = #{fzjcxm}
    </if>
    <if test="fzjcjg !=null and fzjcjg !=''">
      	,fzjcjg = #{fzjcjg}
    </if>
    <if test="jcrybh !=null and jcrybh !=''">
      	,jcrybh = #{jcrybh}
    </if>
    <if test="jcryxm !=null and jcryxm !=''">
      	,jcryxm = #{jcryxm}
    </if>
    <if test="jcrq !=null ">
      	,jcrq = #{jcrq}
    </if>
    <if test="jcjgdm !=null and jcjgdm !=''">
      	,jcjgdm = #{jcjgdm}
    </if>
    <if test="jcjgmc !=null and jcjgmc !=''">
      	,jcjgmc = #{jcjgmc}
    </if>
    <if test="zfbz !=null and zfbz !=''">
      	,zfbz = #{zfbz}
    </if>
    <if test="updateTime !=null">
      	,update_time = #{updateTime }
    </if>
    where id = #{id}
  </update>
  <select id="queryOne"  parameterType="org.system.entity.service.visits.GxyFollowupFzcheckRecords" resultType="map">
       select gffr.id, gffr.gxy_followup_records_id gxyFollowupRecordsId, gffr.yljgbm,fn_print_hospital_name_result(gffr.yljgbm) yljgbmName,hi.jkdabh,hi.yxt_jkdabh yxtJkdabh,gffr.sfjlbh,gffr.jcbh,gffr.fzjcxm, gffr.fzjcjg, 
       gffr.jcrybh, gffr.jcryxm, gffr.jcrq, gffr.jcjgdm, gffr.jcjgmc, gffr.zfbz, gffr.update_time updateTime,
	   gfr.service_resp_task_id serviceRespTaskId,srt.doctor_id doctorId 
	   from gxy_followup_fzcheck_records gffr
	   left join gxy_followup_records gfr on gfr.id=gffr.gxy_followup_records_id
	   left join service_resp_task srt on srt.id=gfr.service_resp_task_id
	   left join health_info hi on hi.user_id=gfr.user_id
     where gffr.id = #{id}
  </select>
</mapper>