<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.service.ServiceTypeMapper" >


    <!-- 新增 -->   
	<insert id="insert" parameterType="org.system.entity.service.ServiceType" useGeneratedKeys="true" keyColumn="id">
	 insert into service_type (name,`desc`,gd_prefix,is_third_party) values(#{name},#{desc},#{gdPrefix},#{isThirdParty})
	</insert>
	
	
	<!-- 删除 -->
	<delete id="delete" parameterType="org.system.entity.service.ServiceType">
		delete from service_type where id=#{id}
	</delete>
	
	
	<!-- 修改 -->
	<update id="update" parameterType="org.system.entity.service.ServiceType">
		update service_type set id=#{id}
		<if test="name !=null and name !=''">
			,name=#{name}
		</if>
		<if test="desc !=null and desc !=''">
			,`desc`=#{desc}
		</if>
		<if test="gdPrefix !=null and gdPrefix !=''">
			,gd_prefix=#{gdPrefix}
		</if>
		<if test="issUse !=null and issUse!=''">
		   ,is_use=#{issUse}
		</if>
		<if test="isThirdParty and isThirdParty !=''">
			,is_third_party=#{isThirdParty}
		</if>
		 WHERE id=#{id}
	</update>
	
	
	<!-- 查询列表 -->
	<select id="queryAll" parameterType="org.system.entity.service.ServiceType" resultType="map">
		select id,name ,`desc` ,gd_prefix gdPrefix,is_third_party isThirdParty ,is_use isUse,oder_by oderBy from service_type 
		<where>
			<if test="name!=null and name!=''">
				name like CONCAT(CONCAT('%', #{name}), '%')
			</if>
			<if test="gdPrefix!=null and gdPrefix!=''">
			and	gd_prefix like CONCAT(CONCAT('%', #{gdPrefix}), '%')
			</if>
			<if test="isThirdParty!=null ">
			and	is_third_party =#{isThirdParty}
			</if>
		</where>
	</select>
	
	<!-- 根据主键查询单个 -->
	<select id="queryOne" parameterType="org.system.entity.service.ServiceType" resultType="map">
		select id,name ,`desc` ,gd_prefix gdPrefix,is_third_party isThirdParty from service_type where id=#{id}
	</select>
	
	<!-- 根据约束键查询数据是否存在 -->
	<select id="checkExists" parameterType="org.system.entity.service.ServiceType" resultType="map">
	     select id,name,`desc`, gd_prefix , is_third_party isThirdParty from service_type where name=#{name} and `desc`=#{desc} and gd_prefix=#{gdPrefix} and  is_third_party =#{thirdParty} and is_use=#{issUse}
	</select>
</mapper>