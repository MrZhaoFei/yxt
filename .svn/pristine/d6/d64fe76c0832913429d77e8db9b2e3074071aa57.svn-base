<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.service.ServiceTypeMapper" >
   <!-- 服务类型管理   只能增加不能删除，可以停用  -->

    <!-- 新增 -->   
	<insert id="insert" parameterType="org.system.entity.service.ServiceType" useGeneratedKeys="true" keyColumn="id">
	 insert into service_type (name,`desc`,gd_prefix,is_third_party,oder_by,is_use) values(#{name},#{desc},#{gdPrefix},#{thirdParty},#{oderBy},#{issUse})
	</insert>
	
	
	<!-- 删除 -->
	<delete id="delete" parameterType="org.system.entity.service.ServiceType">
		delete from service_type where id=#{id}
	</delete>
	
	
	<!-- 修改 -->
	<update id="update" parameterType="org.system.entity.service.ServiceType">
		update service_type set id=#{id}
		<if test="name !=null and name !=''">
			,name=#{name}
		</if>
		<if test="desc !=null and desc !=''">
			,`desc`=#{desc}
		</if>
		<if test="gdPrefix !=null and gdPrefix !=''">
			,gd_prefix=#{gdPrefix}
		</if>
		<if test="issUse !=null ">
		   ,is_use=#{issUse}
		</if>
		<if test="thirdParty!=null">
			,is_third_party=#{thirdParty}
		</if>
		<if test="oderBy!=null ">
			,oder_by=#{oderBy}
		</if>
		 WHERE id=#{id}
	</update>
	
	
	<!-- 查询列表 -->
	<select id="queryAll" parameterType="org.system.entity.service.ServiceType" resultType="map">
		select id,name ,`desc` as de ,gd_prefix,is_third_party thirdParty ,is_use issUse,oder_by oderBy from service_type 
		<where>
			<if test="name!=null and name!=''">
				name like CONCAT(CONCAT('%', #{name}), '%')
			</if>
			<if test="gdPrefix!=null and gdPrefix!=''">
			and	gd_prefix like CONCAT(CONCAT('%', #{gdPrefix}), '%')
			</if>
			<if test="thirdParty!=null and thirdParty!=''">
			and	is_third_party =#{thirdParty}
			</if>
			<!--  and is_use=1  -->
		</where>
		order by oder_by 
	</select>
	
	<!-- 根据主键查询单个 -->
	<select id="queryOne" parameterType="org.system.entity.service.ServiceType" resultType="map">
		select id,name ,`desc` ,is_third_party,oder_by oderBy,is_use issUse from service_type where id=#{id}
	</select>
	
	<!-- 根据约束键查询数据是否存在 -->
	<select id="checkExists" parameterType="org.system.entity.service.ServiceType" resultType="map">
	     select id,name,`desc`, is_third_party,oder_by oderBy,is_use issUse from service_type where name=#{name} and `desc`=#{desc}  and  is_third_party =#{thirdParty} and is_use=#{issUse} and oder_by=#{oderBy}
	</select>
</mapper>