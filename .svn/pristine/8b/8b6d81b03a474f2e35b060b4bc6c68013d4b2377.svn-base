<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.hospital.HospiDepartDoctorRelationMapper" >

  <!-- 删除 -->
  <delete id="delete" parameterType="org.system.entity.hospital.HospiDepartDoctorRelation" >
    delete from hospi_depart_doctor_relation
    where hospital_id = #{hospitalId,jdbcType=INTEGER}
      and department_id = #{departmentId,jdbcType=INTEGER}
      and doctor_id = #{doctorId,jdbcType=INTEGER}
  </delete>
  <!-- 添加 -->
  <insert id="insert" parameterType="org.system.entity.hospital.HospiDepartDoctorRelation" >
    insert into hospi_depart_doctor_relation (hospital_id, department_id, doctor_id
      )
    values (#{hospitalId,jdbcType=INTEGER}, #{departmentId,jdbcType=INTEGER}, #{doctorId,jdbcType=INTEGER}
      )
  </insert>
  <!-- 详情 -->
  <select id="queryOne" resultType="map" parameterType="org.system.entity.hospital.HospiDepartDoctorRelation" >
    select id, code_value, name, state, type, address, telephone, website, picture, address_id, 
    longitude, latitude, contract_num_prefix, contract_doc_id, remark
    from hospital
    where id = #{id,jdbcType=INTEGER}
  </select>
  <!-- 所有 -->
  <select id="queryAll" resultType="map" parameterType="org.system.entity.hospital.HospiDepartDoctorRelation" >
	select DISTINCT dept.id,dept.`name`,dept.pid,dept.remark from hospi_depart_doctor_relation hddr
		left join department dept on dept.id=hddr.department_id
	where hddr.hospital_id=#{hospitalId}
	<if test="departmentName !=null and departmentName !=''">
		and `name` like CONCAT(CONCAT('%', #{departmentName}), '%')
	</if>
  </select>
  <!-- 检查唯一性 -->
  <select id="checkExists" resultType="map" parameterType="org.system.entity.hospital.HospiDepartDoctorRelation" >

  </select>
</mapper>