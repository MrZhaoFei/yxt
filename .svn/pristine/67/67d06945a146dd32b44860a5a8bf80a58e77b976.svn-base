<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.user.healthinfo.FamilyHistoryMapper" >
  <delete id="delete" parameterType="org.system.entity.user.healthinfo.FamilyHistory" >
    delete from family_history
    where id = #{id}
  </delete>
  <insert id="insert" parameterType="org.system.entity.user.healthinfo.FamilyHistory" >
    insert into family_history (jzsid,   gxdm, jbmc, 
      gxmc, bz, zfbz, update_time, 
      health_info_id)
    values (#{jzsid},   #{gxdm}, #{jbmc}, 
      #{gxmc}, #{bz}, #{zfbz}, #{updateTime}, 
      #{healthInfoId})
  </insert>
  <update id="update" parameterType="org.system.entity.user.healthinfo.FamilyHistory" >
    update family_history set id=#{id}
    <if test="jzsid !=null and jzsid !=''">
    	,jzsid = #{jzsid}
    </if>
    <if test="gxdm !=null and gxdm !=''">
    	,gxdm = #{gxdm}
    </if>
    <if test="jbmc !=null and jbmc !=''">
    	,jbmc = #{jbmc}
    </if>
    <if test="gxmc !=null and gxmc !=''">
    	,gxmc = #{gxmc}
    </if>
    <if test="bz !=null and bz !=''">
    	,bz = #{bz}
    </if>
    <if test="zfbz !=null and zfbz !=''">
    	,zfbz = #{zfbz}
    </if>
    <if test="updateTime !=null">
    	,update_time = #{updateTime}
    </if>
    <if test="healthInfoId !=null ">
    	,health_info_id = #{healthInfoId}
    </if>
    where id = #{id}
  </update>
  <select id="queryOne" resultType="map" parameterType="org.system.entity.user.healthinfo.FamilyHistory" >
    select id, jzsid,gxdm,fn_print_sys_code_result(gxdm,';','GB4761-2008') gxdmName, jbmc, gxmc, bz, zfbz, update_time updateTime,health_info_id healthInfoId
    from family_history
    where id = #{id}
  </select>
  <select id="queryAll" parameterType="org.system.entity.user.healthinfo.FamilyHistory"  resultType="map" >
    select id, jzsid,gxdm,fn_print_sys_code_result(gxdm,';','GB4761-2008') gxdmName,  jbmc, gxmc, bz, zfbz, update_time updateTime, health_info_id healthInfoId
    from family_history
    <where>
	    <if test="healthInfoId !=null ">
	    	health_info_id =#{healthInfoId}
	    </if>
    </where>
  </select>
</mapper>