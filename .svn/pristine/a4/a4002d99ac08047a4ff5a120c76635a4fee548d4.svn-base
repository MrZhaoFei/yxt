<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.system.mapper.service.ServicePackConditionMapper" >

  <delete id="delete" parameterType="map" >
    delete from service_pack_condition
    where id = #{id,jdbcType=INTEGER}
      and address_id = #{addressId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="org.system.entity.service.ServicePackCondition" >
    insert into service_pack_condition (id, address_id, package_source_id, 
      service_pack_id, enable_start_time, enable_end_time, 
      price)
    values (#{id,jdbcType=INTEGER}, #{addressId,jdbcType=INTEGER}, #{packageSourceId,jdbcType=INTEGER}, 
      #{servicePackId,jdbcType=INTEGER}, #{enableStartTime,jdbcType=TIMESTAMP}, #{enableEndTime,jdbcType=TIMESTAMP}, 
      #{price,jdbcType=DECIMAL})
  </insert>
  <update id="update" parameterType="org.system.entity.service.ServicePackCondition" >
    update service_pack_condition
    set package_source_id = #{packageSourceId,jdbcType=INTEGER},
      service_pack_id = #{servicePackId,jdbcType=INTEGER},
      enable_start_time = #{enableStartTime,jdbcType=TIMESTAMP},
      enable_end_time = #{enableEndTime,jdbcType=TIMESTAMP},
      price = #{price,jdbcType=DECIMAL}
    where id = #{id,jdbcType=INTEGER}
      and address_id = #{addressId,jdbcType=INTEGER}
  </update>
  <select id="queryOne" resultType="map" parameterType="org.system.entity.service.ServicePackCondition" >
    select id, address_id, package_source_id, service_pack_id, enable_start_time, enable_end_time, 
    price
    from service_pack_condition
    where id = #{id}
  </select>
  <select id="queryAll" resultType="map" parameterType="org.system.entity.service.ServicePackCondition">
	SELECT pts.id,pts.`name`,ps.times from package_service ps
	LEFT JOIN service_pack_condition spc on spc.id=ps.service_pack_condition_id
	LEFT JOIN product_service pts on pts.id=ps.service_id
	<where>
		<if test="id !=null">
			 spc.id=#{id}
		</if>
	</where>
  </select>
</mapper>